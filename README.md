# Open-CyKG
## Open-CyKG: An Open Cyber Threat Intelligence Knowledge Graph

[![Journal](http://img.shields.io/badge/WWW-2018-4b44ce.svg)](https://dl.acm.org/citation.cfm?id=3186030/)
[![Paper](http://img.shields.io/badge/paper-arxiv.1902.00172-B31B1B.svg)](https://arxiv.org/abs/1902.00172)
[![Slides](http://img.shields.io/badge/slides-pdf-green.svg)](https://shikhar-vashishth.github.io/assets/pdf/slides_cesi.pdf)
[![Poster](http://img.shields.io/badge/poster-pdf-blue.svg)](https://shikhar-vashishth.github.io/assets/pdf/cesi_poster.pdf)

### Project Description

Open-CyKG a framework that is constructed using an attention-based neural Open Information Extraction (OIE) model to extract valuable cyber threat information from unstructured Advanced
Persistent Threat (APT) reports. More specifically, we first identify relevant entities by developing a neural cybersecurity Named Entity Recognizer (NER) that aids in labeling relation triples generated by the OIE model. Afterwards, the extracted structured data is canonicalized to build the KG by employing fusion techniques using word embeddings.



![](https://raw.githubusercontent.com/malllabiisc/cesi/master/overview.png)
*Overview of CESI. CESI first acquires side information of noun and relation phrases of Open KB triples. In the second step, it learns embeddings of these NPs and relation phrases while utilizing the side information obtained in previous step. In the third step, CESI performs clustering over the learned embeddings to canonicalize NP and relation phrases. Please refer paper for more details*

### Dependencies

* Compatible with both Python 2.7/3.x
* Dependencies can be installed using `requirements.txt`


### Datasets

* Datasets ReVerb45k, Base and Ambiguous are included with the repository.
* The input to CESI is a KG as list of triples. Each triple is stored as a json in a new line. An example entry is shown below:

For dataset please refer to the refrence in the paper.


```json
{
	"_id": 	  36952,
	"triple": [
		"Frederick",
		"had reached",
		"Alessandria"
	],
	"triple_norm": [
		"frederick",
		"have reach",
		"alessandria"
	],
  	"true_link": {
		"subject": "/m/09w_9",
		"object":  "/m/02bb_4"
	},
  	"src_sentences": [
		"Frederick had reached Alessandria",
		"By late October, Frederick had reached Alessandria."
	],
	"entity_linking": {
		"subject":  "Frederick,_Maryland",
		"object":   "Alessandria"
	},
	"kbp_info": []
}        
```

* `_id` unique id of each triple in the Knowledge Graph. 
* `triple` denotes the actual triple in the Knowledge Graph
* `triple_norm` denotes the normalized form of the triple (after lemmatization, lower casing ...)
* `true_link` is the gold canonicalization of subject and object. For relations gold linking is not available.
* `src_sentences` is the list of sentences from which the triple was extracted by Open IE algorithms. 
* `entity_linking` is the Entity Linking side information which is utilized by CESI.
* `kbp_info` Knowledge-Base Propagation side information used by CESI.

### Usage:

##### Setup Environment:

* After installing python dependencies, execute `sh setup.sh` for setting up required things.
* Pattern library is required to run the code. Please install it from [Python 2.x](https://github.com/clips/pattern)/[Python 3.x](https://github.com/pattern3/pattern).

##### Start PPDB server:

* Running PPDB server is essential for running the main code.
* To start the server execute: `python ppdb/ppdb_server.py -port 9997`  (Let the server run in a separate terminal)

##### Run the main code:

* `python src/cesi_main.py -name reverb45_test_run`
* On executing the above command, all the output will be dumped in `output/reverb45_test_run` directory. 
* `-name` is an arbitrary name assigned to the run.

### Citing:
Please cite the following paper if you use this code in your work.

```bibtex
@inproceedings{cesi2018,
	author = {Vashishth, Shikhar and Jain, Prince and Talukdar, Partha},
	title = {{CESI}: Canonicalizing Open Knowledge Bases Using Embeddings and Side Information},
	booktitle = {Proceedings of the 2018 World Wide Web Conference},
	series = {WWW '18},
	year = {2018},
	isbn = {978-1-4503-5639-8},
	location = {Lyon, France},
	pages = {1317--1327},
	numpages = {11},
	url = {https://doi.org/10.1145/3178876.3186030},
	doi = {10.1145/3178876.3186030},
	acmid = {3186030},
	publisher = {International World Wide Web Conferences Steering Committee},
	address = {Republic and Canton of Geneva, Switzerland},
	keywords = {canonicalization, knowledge graph embeddings, knowledge graphs, open knowledge bases},
}
```
